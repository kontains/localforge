/* Split layout: projects on left, chat+input in middle, tools on right via draggable divider */
#split-container {
    display: flex;
    flex: 1;
    overflow: hidden;
}

#projects-panel {
    display: flex;
    flex-direction: column;
    width: 220px; /* Fixed width */
    min-width: 220px;
    max-width: 220px;
    flex: 0 0 220px; /* Don't grow or shrink */
    background-color: var(--primary-bg);
    border-right: 1px solid var(--border-color);
    overflow: hidden;
}

#main-panel {
    display: flex;
    flex-direction: column;
    flex: 1; /* Takes remaining space initially */
    min-width: 200px; /* Minimum width before it stops shrinking */
}

#right-panel {
    display: flex;
    flex-direction: column;
    width: var(--tool-panel-width); /* Controlled by variable and drag bar */
    min-width: var(--tool-panel-width); /* Minimum width */
    overflow: hidden;
    border-left: 1px solid var(--border-color); /* Added border here for consistency */
}

#drag-bar {
    width: 8px; /* Wider hit area but only 1px visible */
    background-color: transparent; /* Make bar itself invisible */
    cursor: ew-resize;
    z-index: 5; /* Ensure it's above panels */
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

#drag-bar::after {
    content: "";
    position: absolute;
    height: 100%;
    width: 1px; /* Just 1px visible bar */
    background-color: var(--border-color);
    z-index: 1;
}

.drag-handle-icon {
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 12px;
    height: 22px;
    background-color: var(--primary-bg);
    border: 1px solid var(--border-color);
    border-radius: 2px;
}

.drag-handle-icon .material-icons {
    font-size: 10px;
    color: var(--secondary-text);
    opacity: 0.6;
    transition: opacity 0.2s ease;
    transform: rotate(90deg); /* Rotate for vertical orientation */
}

#drag-bar:hover .material-icons {
    opacity: 1;
}

/* Chat container layout within main panel */
#chat-container {
    flex: 1;
    border-bottom: 1px solid var(--border-color);
    width: 100%;
    background-color: var(--primary-bg);
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Contains the scrolling messages */
}

/* Tool panel layout within right panel */
#right-panel #tool-panel {
    flex: 1; /* Takes available space in right panel */
    overflow-y: auto; /* Scroll content if needed */
}

/* Tasks panel layout within right panel */
#right-panel #tasks-panel {
    margin-top: 16px;
    padding: 0 16px 16px;
    flex: 0 0 auto; /* Fixed height section */
    min-height: 350px; /* Fixed height */
    max-height: 350px; /* Fixed height */
}

/* Main content area */
main {
    display: flex; /* This might be redundant if #split-container is the direct child */
    flex: 1;
    overflow: hidden; /* Prevent content overflow */
    background-color: var(--primary-bg);
}